(this.webpackJsonpcpu=this.webpackJsonpcpu||[]).push([[0],{16:function(e,t,a){e.exports=a(33)},21:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),i=a.n(r),o=(a(21),a(4)),u=a(5),l=a(8),s=a(7),m=a(1),d=a(14),v=(a(28),function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e="off";return this.props.on&&(e="on"),c.a.createElement("div",{className:"led ".concat(e)})}}]),a}(c.a.Component)),f=a(2),b=Object(f.b)({name:"clock",initialState:{value:1},reducers:{tick:function(e,t){e.value=t.payload}}}),h=b.actions.tick,g=function(e){return e.clock.value},E=b.reducer,j=(a(29),function(e){var t=e.halt,a=Object(n.useState)(!1),r=Object(d.a)(a,2),i=r[0],o=r[1],u=Object(m.b)(),l=Object(m.c)(g);return Object(n.useEffect)((function(){var e=null;return i&&!t?e=setInterval((function(){u(h(!l))}),1e3):i||clearInterval(e),function(){return clearInterval(e)}}),[i,l,t,u]),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("button",{className:"button button-primary button-primary-".concat(i?"active":"inactive"),onClick:function(){o(!i)}},i?"Pause":"Start"),c.a.createElement("button",{onClick:function(){return u(h(!l))}},l?"Go to negedge":"Go to posedge")),c.a.createElement("div",{id:"clock",className:"module"},c.a.createElement("div",{className:"name"},"Clock: "),c.a.createElement(v,{on:l})))}),O=Object(f.b)({name:"ucounter",initialState:{value:0},reducers:{reset:function(e){e.value=0},increment:function(e){e.value<4?e.value++:e.value=0}}}),w=O.actions,p=w.reset,k=w.increment,N=function(e){return e.ucounter.value},y=O.reducer,S=function(e){var t=e.reset,a=e.clk,r=Object(m.b)(),i=Object(m.c)(N);return Object(n.useEffect)((function(){!0===t&&r(p())}),[t,r]),Object(n.useEffect)((function(){!1===a&&r(k())}),[a,r]),c.a.createElement("div",{id:"microcode",className:"module"},c.a.createElement("div",{className:"name"},"Micro code counter: "),c.a.createElement("div",{className:"value"},i))},A=Object(f.b)({name:"bus",initialState:{value:0},reducers:{setBus:function(e,t){e.value=t.payload}}}),C=A.actions.setBus,I=function(e){return e.bus.value},B=A.reducer,M=(a(30),function(){var e=Object(m.c)(I);return c.a.createElement("div",{id:"bus",className:"module"},c.a.createElement("div",{className:"name"},"Bus: "),c.a.createElement("div",{className:"value"},"(",e,")"))}),R=Object(f.b)({name:"programCounter",initialState:{value:0,reset:!1},reducers:{reset:function(e,t){t.payload?(e.value=0,e.reset=!0):e.reset=!1},increment:function(e){e.reset||(e.value<15?e.value++:e.value=0)},load:function(e,t){e.reset||(e.value=t.payload)}}}),X=R.actions,x=X.reset,D=X.increment,J=X.load,U=function(e){return e.programCounter.value},V=R.reducer,W=function(e){var t=e.reset,a=e.clk,r=e.inc,i=e.load,o=e.input,u=e.co,l=e.out,s=Object(m.b)(),d=Object(m.c)(U);Object(n.useEffect)((function(){s(x(t))}),[t,s]),Object(n.useEffect)((function(){u&&l(d)}),[u,l,d]),Object(n.useEffect)((function(){r&&a&&s(D())}),[r,a,s]),Object(n.useEffect)((function(){i&&a&&s(J(o))}),[i,a,o,s]);var v="busDisconnected";return u&&(v="busOut"),c.a.createElement("div",{id:"pc",className:"module ".concat(v)},c.a.createElement("div",{className:"name"},"ProgramCounter: "),c.a.createElement("div",{className:"value"},d))},Y=Object(f.b)({name:"ram",initialState:{value:0,address:0},reducers:{load:function(e,t){e.address=t.payload;var a=[30,47,224,240,0,0,0,0,0,0,0,0,0,0,28,14];e.value=a[e.address]}}}),P=Y.actions.load,T=function(e){return e.ram.value},F=function(e){return e.ram.address},G=Y.reducer,H=function(e){var t=e.readAddress,a=e.ro,r=e.out,i=Object(m.b)(),o=Object(m.c)(T),u=Object(m.c)(F);Object(n.useEffect)((function(){a&&r(o)}),[a,r,o]),Object(n.useEffect)((function(){i(P(t))}),[t,i]);var l="busDisconnected";return a&&(l="busOut"),c.a.createElement("div",{id:"ram",className:"module ".concat(l)},c.a.createElement("div",{className:"name"},"RAM: "),c.a.createElement("div",{className:"value"},"0x",o.toString(16).toUpperCase(),"(",o,") [ addr: ",u," ]"))},L=Object(f.b)({name:"register",initialState:{values:{regInstruction:0,regMar:0,regA:0,regB:0,regOut:0}},reducers:{reset:function(e){e.values={}},load:function(e,t){e.values[t.payload.key]=t.payload.value}}}),$=L.actions,q=$.reset,z=$.load,K=function(e){return e.register.values},Q=L.reducer,Z=function(e){var t=e.reset,a=e.clk,r=e.input,i=e.id,o=e.name,u=e.oe,l=e.load,s=e.out,d=Object(m.b)(),v=Object(m.c)(K),f=v[i]?v[i]:0,b=Object(n.useRef)(r);Object(n.useEffect)((function(){!0===t&&d(q())}),[t,d]),Object(n.useEffect)((function(){u&&s(f)}),[u,f,s]),Object(n.useEffect)((function(){r&&(b.current=r)}),[r]),Object(n.useEffect)((function(){l&&a&&d(z({key:i,value:b.current}))}),[l,a,i,d]);var h="busDisconnected";return u&&(h="busOut"),c.a.createElement("div",{className:"module reg ".concat(h)},c.a.createElement("div",{className:"name"},o,": "),c.a.createElement("div",{className:"value"},"0x",f.toString(16).toUpperCase()," (",f,")"))},_=Object(f.b)({name:"alu",initialState:{value:0},reducers:{calculate:function(e,t){var a=t.payload,n=a.regA,c=a.regB,r=a.sub;Number.isInteger(n)||(n=0),Number.isInteger(c)||(c=0),e.value=r?n-c:n+c}}}),ee=_.actions.calculate,te=function(e){return e.alu.value},ae=_.reducer,ne=function(e){var t=e.regA,a=e.regB,r=e.sub,i=e.eo,o=e.out,u=Object(m.b)(),l=Object(m.c)(te);Object(n.useEffect)((function(){u(ee({regA:t,regB:a,sub:r}))}),[t,a,r,u]),Object(n.useEffect)((function(){i&&o(l)}),[i,l,o]);var s="busDisconnected";return i&&(s="busOut"),c.a.createElement("div",{id:"alu",className:"module ".concat(s)},c.a.createElement("div",{className:"name"},"Sum: "),c.a.createElement("div",{className:"value"},l))},ce=function(){for(var e=[],t=0;t<=256;t++)e[t]=0;return e[0]=16388,e[1]=5128,e[16]=16388,e[17]=5128,e[18]=18432,e[19]=4608,e[32]=16388,e[33]=5128,e[34]=18432,e[35]=4128,e[36]=640,e[224]=16388,e[225]=5128,e[226]=272,e[240]=32768,e},re=function(e,t){return e>>t&1},ie=function(e){return{hlt:re(e,15),mi:re(e,14),ri:re(e,13),ro:re(e,12),io:re(e,11),ii:re(e,10),ai:re(e,9),ao:re(e,8),eo:re(e,7),su:re(e,6),bi:re(e,5),oi:re(e,4),ce:re(e,3),co:re(e,2),j:re(e,1),jc:re(e,0)}},oe=Object(f.b)({name:"controller",initialState:{romValue:0,cw:ie(0),address:0},reducers:{buildControlWord:function(e,t){var a=ce(),n=t.payload,c=n.regInstruction,r=n.ucount;Number.isInteger(c)||(c=0);var i=240&c;e.readAddress=i|r,e.romValue=a[e.readAddress],e.cw=ie(e.romValue)}}}),ue=oe.actions.buildControlWord,le=function(e){return e.controller.romValue},se=function(e){return e.controller.cw},me=function(e){return e.controller.readAddress},de=oe.reducer,ve=function(e){var t=e.counter,a=e.ram,r=Object(m.b)(),i=Object(m.c)(le),o=Object(m.c)(me);return Object(n.useEffect)((function(){r(ue({ucount:t,regInstruction:a}))}),[t,a,r]),c.a.createElement("div",{id:"controller",className:"module"},c.a.createElement("div",{className:"name"},"Control word: "),c.a.createElement("div",{className:"value"},i.toString(16).toUpperCase()," (addr: ",o,")"))},fe=Object(f.b)({name:"cpu",initialState:{reset:!1},reducers:{reset:function(e,t){e.reset=t.payload}}}),be=(fe.actions.reset,function(e){return e.cpu.reset}),he=fe.reducer,ge=(a(31),function(){var e=Object(m.b)(),t=Object(m.c)(be),a=Object(m.c)(g),n=Object(m.c)(N),r=Object(m.c)(I),i=Object(m.c)(K),o=Object(m.c)(se);return c.a.createElement("div",{id:"cpu"},c.a.createElement(j,{halt:o.hlt}),c.a.createElement(S,{clk:a,reset:t}),c.a.createElement(M,null),c.a.createElement(W,{clk:a,reset:t,inc:o.ce,load:o.j,input:r,co:o.co,out:function(t){return e(C(t))}}),c.a.createElement(Z,{name:"Memory Address Register",id:"regMar",clk:a,reset:t,load:o.mi,input:r,oe:!1}),c.a.createElement(H,{clk:a,readAddress:i.regMar,ro:o.ro,out:function(t){return e(C(t))}}),c.a.createElement(Z,{name:"Instruction Register",id:"regInstruction",clk:a,reset:t,load:o.ii,input:r,oe:o.io,out:function(t){return e(C(15&t))}}),c.a.createElement(ve,{counter:n,ram:i.regInstruction}),c.a.createElement(Z,{name:"A Register",id:"regA",clk:a,reset:t,load:o.ai,input:r,oe:o.ao,out:function(t){return e(C(t))}}),c.a.createElement(Z,{name:"B Register",id:"regB",clk:a,reset:t,load:o.bi,input:r,oe:!1}),c.a.createElement(ne,{regA:i.regA,regB:i.regB,sub:!1,eo:o.eo,out:function(t){return e(C(t))}}),c.a.createElement(Z,{name:"Output",id:"regOut",clk:a,reset:t,load:o.oi,input:r,oe:!1}))}),Ee=a(15),je=function(e){var t=e.name,a=e.clk,r=e.waveform,i=e.signal,o=Object(Ee.a)(e,["name","clk","waveform","signal"]),u=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=u.current.getContext("2d");r.update(e,i)}),[a,r]),c.a.createElement("div",{className:"waveform"},c.a.createElement("div",{className:"name"},t,":"),c.a.createElement("canvas",Object.assign({className:"canvas",ref:u},o)))},Oe=(a(32),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#0000FF";Object(o.a)(this,e),this.startX=0,this.startY=0,this.currentX=0,this.currentY=0,this.width=10,this.height=15,this.strokeStyle=t,this.currentSignal=0}return Object(u.a)(e,[{key:"update",value:function(e,t){var a,n=this.currentX,c=this.currentY,r=this.currentX+this.width;this.currentX=r,a=this.currentSignal!==t?this.currentSignal?this.height:0:this.currentSignal?0:this.height,this.currentY=a,e.strokeStyle=this.strokeStyle,e.beginPath(),e.moveTo(n,c),e.lineTo(n,a),e.lineTo(r,a),e.stroke(),e.stroke(),this.currentSignal=t}}]),e}()),we=[];we.clk=new Oe("#dc143c"),we.jc=new Oe("#00004f"),we.j=new Oe("#00004f"),we.ce=new Oe("#051700"),we.co=new Oe("#051700"),we.oi=new Oe,we.bi=new Oe,we.su=new Oe,we.eo=new Oe,we.ao=new Oe,we.ai=new Oe,we.ii=new Oe("#051700"),we.io=new Oe,we.ro=new Oe("#051700"),we.ri=new Oe,we.mi=new Oe("#051700"),we.hlt=new Oe("#000000");var pe=function(){var e=Object(m.c)(g),t=Object(m.c)(se);return c.a.createElement("div",{id:"visual"},c.a.createElement("div",{className:"logicAnalyser"},c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Clock",waveform:we.clk,signal:e}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Counter out [co ".concat(t.co,"]"),waveform:we.co,signal:t.co}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"MAR in [mi ".concat(t.mi,"]"),waveform:we.mi,signal:t.mi}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"RAM out [co ".concat(t.ro,"]"),waveform:we.ro,signal:t.ro}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Instruction in [ii ".concat(t.ii,"]"),waveform:we.ii,signal:t.ii}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Counter enable [ce ".concat(t.ce,"]"),waveform:we.ce,signal:t.ce}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Instruction out [io ".concat(t.io,"]"),waveform:we.io,signal:t.io}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Subtract [su ".concat(t.su,"]"),waveform:we.su,signal:t.su}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"A register in [ai ".concat(t.ai,"]"),waveform:we.ai,signal:t.ai}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"B register in [bi ".concat(t.bi,"]"),waveform:we.bi,signal:t.bi}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"ALU out [eo ".concat(t.eo,"]"),waveform:we.eo,signal:t.eo}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"A register out [ao ".concat(t.ao,"]"),waveform:we.ao,signal:t.ao}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Output register in [oi ".concat(t.oi,"]"),waveform:we.oi,signal:t.oi}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"RAM in [ri ".concat(t.ri,"]"),waveform:we.ri,signal:t.ri}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Jump [j ".concat(t.j,"]"),waveform:we.j,signal:t.j}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Jump conditional [jc ".concat(t.jc,"]"),waveform:we.jc,signal:t.jc}),c.a.createElement(je,{width:600,height:20,className:"canvas",clk:e,name:"Halt [hlt ".concat(t.hlt,"]"),waveform:we.hlt,signal:t.hlt})))},ke=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{id:"app"},c.a.createElement(ge,null),c.a.createElement(pe,null))}}]),a}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne=Object(f.a)({reducer:{cpu:he,clock:E,bus:B,register:Q,ucounter:y,programCounter:V,controller:de,alu:ae,ram:G}});i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(m.a,{store:Ne},c.a.createElement(ke,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.11f2dfac.chunk.js.map